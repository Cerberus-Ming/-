# 作业2：角点检测与图像匹配

## 任务一：角点检测与图像匹配

- 数据：棋盘图片

- 要求：自己写函数实现Harris角点检测子，设置不同参数，比较检测结果

  其中 ：

  > 边缘检测子：sobel检测子
  > 响应函数参数alpha：0.05 
  > 参数包括，窗口大小和检测阈值

### 1.   实验原理

Harris角点检测是一种用于检测图像中角点（或者对角线交点）的方法，它通过计算局部区域的灰度变化来判断是否存在角点。这种方法对于图像中的角点非常敏感，而对于平坦区域和边缘相对不敏感。

操作步骤：

1、灰度化处理： 首先，将输入的棋盘图片进行灰度化处理，将彩色图像转换为灰度图像。这是因为角点检测通常在灰度图像上进行。

2、边缘检测： 使用Sobel边缘检测子对灰度图像进行边缘检测。Sobel算子是一种常用的卷积核，用于寻找图像中的边缘。它计算每个像素点的梯度，以便检测图像中的边缘。

3、计算图像梯度： 对经过边缘检测的图像，计算每个像素点的梯度。这一步可以使用Sobel算子计算得到。

4、计算Harris响应函数： 对每个像素点，计算Harris响应函数的值。Harris响应函数公式如下：

![image-20231203220225611](C:\Users\钐二铭\AppData\Roaming\Typora\typora-user-images\image-20231203220225611.png)


其中，M 是一个2x2的矩阵，表示局部窗口内的梯度信息。α 是一个常数，一般取0.05。

![image-20231203220320611](C:\Users\钐二铭\AppData\Roaming\Typora\typora-user-images\image-20231203220320611.png)

其中，$I_x$和$I_y$ 是图像在该点处的梯度。

5、非极大值抑制： 对Harris响应函数进行非极大值抑制，只保留局部最大值，抑制其他非极大值。这样可以得到稀疏的角点检测结果。

6、阈值处理： 设置一个阈值，将Harris响应函数大于该阈值的点认定为角点。通过调整阈值，可以控制角点的数量。

7、窗口大小和检测阈值比较： 实验中，可以尝试不同的窗口大小和不同的检测阈值，观察Harris角点检测的效果变化。较大的窗口通常能够检测到更大的角点结构，而较小的窗口可以捕捉到更小的角点。

### 2. 实验结果：

结果如下图所示：

![task1](D:\桌面\视觉作业\Homework2\task1.png)

如上图所示，在Harris角点检测中，阈值大小与检测结果呈反比关系，即阈值越大，能够检测出的角点越少。这是因为Harris角点检测中的阈值用于过滤掉Harris响应函数值较小的像素点，只保留具有较大响应的局部最大值，从而得到稀疏的角点检测结果。

- 阈值较小的情况： 当阈值较小时，Harris响应函数较小的像素点也被保留下来，导致角点检测结果较为密集。这可能会包括一些噪声或者不太显著的角点，使得检测结果过于灵敏，可能包含一些不必要的特征。

- 阈值较大的情况： 当阈值较大时，只有Harris响应函数较大的像素点才能通过阈值筛选，因此检测结果中的角点数量减少。这样可以过滤掉一些不够显著的特征，得到更加鲁棒的角点检测结果。然而，设置过高的阈值可能会导致一些真实的角点被忽略。

- 权衡选择： 在实际应用中，选择适当的阈值是一个权衡的过程。如果希望检测到更多的角点，可以选择较小的阈值；如果希望得到更为稀疏和显著的角点，可以选择较大的阈值。实验中通过调整不同的阈值，可以观察到角点检测结果的变化，从而根据具体应用需求选择合适的阈值。

## 任务二：SIFT算法

- 数据：山脉图片1和图片2
- 要求：使用SIFT算法实现两幅山脉图片的匹配
  - 调用函数实现
  - 调节算法参数，进行匹配结果对比
  - 学习SIFT算法源代码


**1、实验原理**

SIFT（Scale-Invariant Feature Transform）算法是由David Lowe于1999年提出的一种用于图像处理和计算机视觉中的特征检测和描述算法。SIFT算法具有尺度不变性、旋转不变性和局部性质等特点，使其在广泛的计算机视觉任务中得到了应用，包括图像匹配、目标识别、三维重建等。

使用SIFT算法实现两幅山脉图片的匹配的操作步骤如下：

1、图像预处理： 首先，对两幅山脉图片进行图像预处理，包括灰度化、降噪等步骤，确保图像质量较好。

2、关键点检测： 利用SIFT算法的关键点检测阶段，提取图像中的关键点。这些关键点是在不同尺度和旋转角度下稳定的兴趣点。

3、关键点描述： 对每个关键点周围的区域计算特征描述子，以描述关键点周围的局部特征。这些描述子对图像的旋转、缩放和部分遮挡具有不变性。

4、匹配： 对两幅图像中的关键点进行匹配。通常使用一种距离度量（如欧氏距离）来衡量两个关键点描述子之间的相似性。匹配的结果可以通过阈值来筛选，以去除不准确的匹配。

5、调节算法参数： 在实验中，可以调节SIFT算法的参数，例如尺度空间的层数、关键点检测的阈值等。调节这些参数可以影响关键点的数量和匹配结果的准确性。

6、匹配结果对比： 对不同参数设置下的匹配结果进行对比分析。通过观察匹配结果，可以了解不同参数对算法性能的影响，以及在不同条件下SIFT算法的稳定性和鲁棒性。

**2、实验结果**

结果如下图所示：

![task2](D:\桌面\视觉作业\Homework2\task2.png)

如上图所示，在使用SIFT法进行两张图像的匹配时，观察到相同的物体能够成功匹配，表现出较高的精确度。

- 尺度不变性： SIFT算法具有尺度不变性，即使物体在不同的尺度下呈现，算法依然能够找到对应的关键点并成功匹配。这使得SIFT在处理具有尺度变化的图像场景时表现出色。
- 旋转不变性： SIFT算法也具有旋转不变性，即使物体发生了旋转，算法同样能够找到相应的关键点并实现匹配。这增强了算法在具有旋转变换的场景中的适用性。
- 局部性质： SIFT算法提取的关键点和描述子具有局部性质，即对于物体的局部区域有较好的描述。这使得算法能够对图像中的局部特征进行有效匹配，而不受全局变化的影响。
- 鲁棒性： 通过Lowe's ratio test等筛选方式，SIFT算法在匹配过程中保持一定的鲁棒性，能够排除一些不准确的匹配，进一步提高匹配的精确性。
- 实验参数调整： 在实验过程中，可以进行SIFT算法参数的调整，例如特征点匹配时的距离比例阈值等。这些参数的调整会影响匹配结果的准确性，可以通过调整这些参数来优化匹配效果。
